<!DOCTYPE html>
<html ng-app="farmbuild.webservices.examples.soilarea">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Farm Build Web Service - Authentication demo (angularJS)</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../../main.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
</head>
<body ng-controller="WfsAuthCtrl">
<content>
    <h3>
        Farmbuild  - Web Services - Soil Areas Service
        <small>(angularJS)</small>
    </h3>
    <hr/>
    <div>
        <p>This page demonstrates how to connect to the Farmbuild soil areas Web services.</p>
        <p>Two (2) ways to connect will be demonstrated:
            <ul>
                <li>Using a valid token.  Refer to this <a href="../farmbuild-oauth/index.html">Authentication</a> demo page for an example of how to obtain the token.</li>
                <li>Via a web proxy</li>
            </ul>
        </p>
        <p>To connect with the token:
        <ul>
            <li>Copy and paste a valid token into the Authentication Token field.</li>
            <li>Enter the WFS URL you wish to connect.</li>
            <li>Enter your farm data in JSON.</li>
            <li>Click the "Connect With Token" button.</li>
        </ul>
        </p>
        <p>To connect via proxy:
        <ul>
            <li>Enter the authentication proxy URL.  By default, this proxy will be listening at <i>http://localhost:9000</i>.</li>
            <li>Enter your farm data in JSON.</li>
            <li>Click the "Connect Via Proxy" button.</li>
        </ul>
        </p>
    </div>
    <form ng-submit="connectWithToken(wfsUrl, token, farmdata4token)" method="post"
          role="form" novalidate>
        <fieldset>
            <legend>
                Token authentication form
            </legend>

            <form-item class="form-group col-md-12">
                <label>Authentication Token</label>
                <textarea name="token" ng-model="token" rows="4"
                       class="form-control" ></textarea>
            </form-item>

            <form-item class="form-group col-md-12">
                <label>WFS URL</label>
                <input name="wfsUrl" ng-model="wfsUrl" type="text" class="form-control">
            </form-item>

            <form-item class="form-group col-md-12">
                <label>Farm Data</label>
                <textarea name="farmdata4token" ng-model="farmdata4token" rows="4"
                          class="form-control" ></textarea>
            </form-item>
        </fieldset>

        <fieldset>

            <buttons class="col-md-12">
                <button type="submit" class="btn btn-primary" ng-disabled="(wfsUrl == null) || (token == null) || (farmdata4token==null)" >Connect With Token</button>

            </buttons>
        </fieldset>
    </form>

    <form ng-submit="connectViaProxy(proxyUrl, farmdata4proxy)" method="post"
          role="form" novalidate>


        <fieldset>
            <legend>
                Proxy form
            </legend>

            <form-item class="form-group col-md-12">
                <label>Authentication Proxy URL</label>
                <input name="proxyUrl" ng-model="proxyUrl" type="text" class="form-control">
            </form-item>

            <form-item class="form-group col-md-12">
                <label>Farm Data</label>
                <textarea name="farmdata4proxy" ng-model="farmdata4proxy" rows="4"
                          class="form-control" ></textarea>
            </form-item>
        </fieldset>
        <fieldset>

            <buttons class="col-md-12">
                <button type="submit" class="btn btn-primary" ng-disabled="(proxyUrl == null) || (farmdata4proxy == null)" >Connect Via Proxy</button>
            </buttons>
        </fieldset>
    </form>

    <summary>
        <fieldset>
            <legend>
                Result
            </legend>
            <error ng-cloak class="col-sm-12 bg-danger" ng-show="error">
                <p ng-repeat="errMsg in errorMessages">
                    {{errMsg}}
                </p>
            </error>
            <form-item class="form-group col-sm-6">
                <p ng-repeat="msg in messages">
                    {{msg}}
                </p>
            </form-item>
        </fieldset>
    </summary>

    <version class="col-md-12">
        Version: <span ng-bind="appVersion"></span>
    </version>
</content>

<script src="../../../dist/farmbuild-core.min.js"></script>
<script src="../../../dist/farmbuild-farmdata.js"></script>
<script src="../../config.js"></script>
<script src="index.js"></script>

</body>
</html>
